{{? this.pois && this.pois.length }}

<div class="category__panel{{= this.active ? '' : ' category__panel--hidden' }}">
  <div class="category__panel__head">
      <span class="category__panel__logo_pj"></span>
      <span class="category__panel__title">{{= _('PAGES JAUNES', 'categories') }}</span>
      <span class="category__panel__close icon-x" {{= click(this.closeAction) }}></span>
      <span class="category__panel__partnership">{{= _('Partnership', 'categories') }}</span>
      <span class="category__panel__partnership_icon">i</span>
  </div>
  <div class="category__panel__scroll">
    {{~ this.pois:poi:i }}

      {{
        let phoneBlock = poi.blocks.find((block) => block.type === 'phone');
        let phoneNumber = null;
        if(phoneBlock) {
          phoneNumber = phoneBlock.international_format;
        }

        let imagesBlock = poi.blocks.find((block) => block.type === 'images');
        let image = null;
        if(imagesBlock) {
          image = imagesBlock.images[0].url;
        }

        let ico = IconManager.get(poi);

        const grades = poi.blocks.find((block) => block.type === 'grades');
      }}

      <div class="category__panel__item" {{= click(this.selectPoi, this, poi) }} {{= mouseover(this.highlightPoiMarker, this, poi) }} {{= mouseout(this.unhighlightPoiMarker, this, poi) }}>
        <div class="category__panel__item_inner">

          <div class="category__panel__image" {{? image}}style="background-image:url('{{= image}}')"{{?}}>

          {{? !image && ico }}
            <div class="poi_panel__title__symbol icon icon-{{= ico.iconClass }}" style="color:{{= ico.color ? ico.color : '#444648' }}"></div>
          {{?}}

          </div>

          <h3 class="category__panel__name">
            {{= poi.getInputValue() }}
          </h3>

          {{? poi.subClassName }}
            <p class="category__panel__type">
              {{= this.poiSubClass(poi.subClassName) }}
            </p>
          {{?}}

          {{? poi.address && poi.address.label }}
            <p class="category__panel__address">
              {{= this.htmlEncode(poi.address.label) }}
            </p>
          {{?}}

          {{? grades }}
            <div class="panel__note">
              {{~ [...Array(5)]:star:k }}      
                <span class="icon-icon_star{{= k+1 <= grades.global_grade ? '-filled' : ''}}"></span>
              {{~}}

              <span class="panel__note__review_count">
                {{= grades.total_grades_count }} {{= _('reviews', 'categories') }}
              </span>
            </div>
          {{?}}

          {{= this.minimalHourPanel.set(poi).render() }}

          {{? phoneNumber }}

            <div class="category__panel__phone" {{= click(this.showPhoneNumber, this, {poi, i}) }}>
              <span class="icon-icon_phone"></span>
              <span id="category__panel__phone_hidden_{{= i}}">{{= _('See the phone number', 'categories') }}</span>
              <span id="category__panel__phone_revealed_{{= i}}" style="display: none">{{= phoneNumber }}</span>
            </div>

          {{?}}

        </div>
      </div>
    {{~}}
  </div>
</div>

{{?}}